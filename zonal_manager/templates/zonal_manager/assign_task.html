{% extends "dashboards/base_zm.html" %}
{% load static %}
{% block content %}

<div class="min-h-screen bg-gradient-to-br from-pink-100 via-white to-red-50 p-4 md:p-8">
  <div class="max-w-3xl mx-auto backdrop-blur-lg bg-white/80 rounded-2xl shadow-2xl p-6 md:p-10 border border-red-100 transition-all duration-500 hover:shadow-red-200 hover:scale-[1.01]">

    <!-- Header -->
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-red-600 to-pink-500 bg-clip-text text-transparent flex items-center gap-2">
        <i data-lucide="clipboard-list" class="w-8 h-8 text-red-500"></i>
        Assign Task
      </h1>
      <a href="{% url 'zm_task_list' %}"
         class="bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 px-4 py-2 rounded-xl flex items-center gap-2 font-semibold shadow hover:from-gray-200 hover:to-gray-300 transition-all">
        <i data-lucide="list" class="w-5 h-5"></i>
        View All
      </a>
    </div>

    <!-- Form -->
    <form method="POST" class="space-y-6">
      {% csrf_token %}

      <!-- Category -->
      <div>
        <label class="block text-gray-700 font-semibold mb-2">Category</label>
        <div class="flex items-center bg-white border rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-pink-400 transition-all">
          <span class="px-3 bg-gradient-to-r from-pink-100 to-red-100 text-red-600">
            <i data-lucide="folder" class="w-5 h-5"></i>
          </span>
          <select name="category" class="w-full p-2.5 focus:outline-none bg-transparent">
            <option value="">-- Select Category --</option>
            {% for cat in categories %}
              <option value="{{ cat.id }}">{{ cat.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- Task Title -->
      <div>
        <label class="block text-gray-700 font-semibold mb-2">Task Title</label>
        <div class="flex items-center bg-white border rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-red-400 transition-all">
          <span class="px-3 bg-gradient-to-r from-pink-100 to-red-100 text-red-600">
            <i data-lucide="type" class="w-5 h-5"></i>
          </span>
          <input type="text" name="title" required
                 class="w-full p-2.5 focus:outline-none bg-transparent"
                 placeholder="Enter task title">
        </div>
      </div>

      <!-- Details -->
      <div>
        <label class="block text-gray-700 font-semibold mb-2">Task Details</label>
        <div class="flex items-start bg-white border rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-red-400 transition-all">
          <span class="px-3 pt-2 bg-gradient-to-r from-pink-100 to-red-100 text-red-600">
            <i data-lucide="file-text" class="w-5 h-5"></i>
          </span>
          <textarea name="details" rows="3"
                    class="w-full p-2.5 focus:outline-none bg-transparent resize-none"
                    placeholder="Describe the task clearly..."></textarea>
        </div>
      </div>

      <!-- Assign To -->
      <div>
        <label class="block text-gray-700 font-semibold mb-2">Assign To (ASM)</label>
        <div class="flex items-center bg-white border rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-pink-400 transition-all">
          <span class="px-3 bg-gradient-to-r from-pink-100 to-red-100 text-red-600">
            <i data-lucide="users" class="w-5 h-5"></i>
          </span>
          <select name="assigned_to" required class="w-full p-2.5 focus:outline-none bg-transparent">
            <option value="">-- Select ASM --</option>
            {% for asm in asms %}
              <option value="{{ asm.id }}">{{ asm.full_name }} ({{ asm.username }})</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!-- Dates -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-gray-700 font-semibold mb-2">Start Date</label>
          <div class="flex items-center bg-white border rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-pink-400 transition-all">
            <span class="px-3 bg-gradient-to-r from-pink-100 to-red-100 text-red-600">
              <i data-lucide="calendar" class="w-5 h-5"></i>
            </span>
            <input type="date" name="start_date" class="w-full p-2.5 focus:outline-none bg-transparent">
          </div>
        </div>

        <div>
          <label class="block text-gray-700 font-semibold mb-2">End Date</label>
          <div class="flex items-center bg-white border rounded-xl overflow-hidden shadow-sm focus-within:ring-2 focus-within:ring-pink-400 transition-all">
            <span class="px-3 bg-gradient-to-r from-pink-100 to-red-100 text-red-600">
              <i data-lucide="calendar-days" class="w-5 h-5"></i>
            </span>
            <input type="date" name="end_date" class="w-full p-2.5 focus:outline-none bg-transparent">
          </div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="flex justify-end gap-4 mt-8">
        <a href="{% url 'zm_task_list' %}"
           class="px-5 py-2 rounded-xl text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 font-semibold flex items-center gap-2 shadow transition-all">
          <i data-lucide="arrow-left" class="w-5 h-5"></i> Cancel
        </a>
        <button type="submit"
                class="px-6 py-2 rounded-xl text-white font-semibold flex items-center gap-2 bg-gradient-to-r from-red-500 via-pink-500 to-orange-400 hover:from-red-600 hover:to-orange-500 shadow-lg hover:shadow-xl transition-all duration-300">
          <i data-lucide="send" class="w-5 h-5"></i>
          Assign Task
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Lucide Icons -->
<script src="https://unpkg.com/lucide@latest"></script>
<script>lucide.createIcons();</script>

{% endblock %}
