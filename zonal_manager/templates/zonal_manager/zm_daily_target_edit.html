{% extends "dashboards/base_zm.html" %}
{% load static %}
{% block content %}

<div class="bg-gradient-to-br from-yellow-50 via-white to-yellow-100 min-h-screen p-4 md:p-6 animate-fadeIn">
  <div class="max-w-4xl mx-auto bg-white shadow-2xl rounded-2xl p-8 transition-transform duration-500 hover:scale-[1.01]">
    <h1 class="text-2xl font-bold mb-6 flex items-center gap-2 text-gray-800">
      <i data-lucide="edit-3" class="w-6 h-6 text-yellow-600"></i>
      Edit Daily Target â€” {{ target.date|date:"d M Y" }}
    </h1>

    <form method="POST" id="editTargetForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% csrf_token %}

      <!-- Each field rendered manually -->
      <div>
        <label class="block text-gray-700 font-semibold mb-2">Applications</label>
        <input type="number" name="application_target" value="{{ target.application_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2">POP</label>
        <input type="number" name="pop_target" value="{{ target.pop_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2">E-Sign</label>
        <input type="number" name="esign_target" value="{{ target.esign_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2">New Taluk</label>
        <input type="number" name="new_taluk_target" value="{{ target.new_taluk_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2">New Live Partners</label>
        <input type="number" name="new_live_partners_target" value="{{ target.new_live_partners_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2">Activations</label>
        <input type="number" name="activations_target" value="{{ target.activations_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2">Calls</label>
        <input type="number" name="calls_target" value="{{ target.calls_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <div>
        <label class="block text-gray-700 font-semibold mb-2">SD Collection</label>
        <input type="number" name="sd_collection_target" value="{{ target.sd_collection_target }}"
               class="target-input w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition outline-none" required min="0">
      </div>

      <!-- Buttons -->
      <div class="md:col-span-2 flex justify-end gap-4 mt-8 pt-4 border-t border-gray-200">
        <a href="{% url 'daily_target_detail' target.id %}"
           class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-all duration-300">
          Cancel
        </a>
        <button type="submit"
                class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-all duration-300 active:scale-95">
          Save Changes
        </button>
      </div>
    </form>
  </div>
</div>

<script>
  lucide.createIcons();

  document.querySelectorAll(".target-input").forEach((input) => {
    input.addEventListener("input", () => {
      const errorMsg = input.nextElementSibling;
      if (input.value === "" || isNaN(input.value) || parseFloat(input.value) < 0) {
        input.classList.add("border-red-400", "focus:ring-red-400");
      } else {
        input.classList.remove("border-red-400", "focus:ring-red-400");
      }
    });
  });
</script>

<style>
  .animate-fadeIn {
    animation: fadeIn 0.6s ease-in-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>

{% endblock %}
